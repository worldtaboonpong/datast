{% extends "base.html" %} {% block head%} {{super()}} {% endblock %} {% block
content %}
<html>
  <script type="text/javascript">
    function showSelection(col) {
      console.log(col);  
      
      var selector = document.getElementById("selector");
      selector.style.display = "block";
      var target_col = document.getElementById(col + "-for-select");
      target_col.style.display = "none";
      var target_col_setter = document.getElementById("target_column") 
      target_col_setter.value = col
      var selected_col = document.getElementById(col)
      var ancestor = document.getElementById('all-target-column')
      console.log(ancestor)
      var descendents = ancestor.getElementsByTagName('*')
      console.log(descendents)
      for (let i = 0; i<descendents.length; i++){
        if (descendents[i].id != col){
          var non_selected_target = document.getElementById(descendents[i].id)
          non_selected_target.onclick = null
          non_selected_target.style.background = 'grey'      
        }        
      }   
    }

    function refresh() {
      window.location.reload();
    }
  </script>
  <body class="predict-body">
    <div class="predict-header">
      <h1>What do you want to predict</h1>
    </div>
    <form action="/showoutput" method="POST">
      <div id="all-target-column" class="select-target-column-container" >
          {% for col,val in columns_values.items() %}
          <p class="selected-target-column" id="{{col}}" onclick="showSelection(this.id)">
            {{col}}
          </p>      
          {% endfor %}
      </div>
      <div>
          <button class="refresh-button" id="buton" onclick="refresh()" type="button">Refresh</button>
      </div>
      <div class="selecter-body">
        <input type="hidden" name="target_column" id="target_column" name="target_column" value="">

        <div id="selector" style="display: none">
          <div class="selecter-header">
            <h1>
              Select value
            </h1>
          </div>
          {% for col,val in columns_values.items() %}
          <div>
            <label for="selector-for-{{col}}" id="{{col}}-for-select">{{col}}
              <select id="selector-for-{{col}}" name="selector-for-{{col}}">
                {% for v in val %}
                <option id="{{v}}">{{v}}</option>
                {% endfor %}
              </select>
            </label>
          </div>        
          {% endfor %}
          <div>
            <button class="predict-button" id="buton" type="submit" >Predict</button>
          </div>
        </div>
      </div>
      
    </form>
  </body>
</html>
{% endblock %}
